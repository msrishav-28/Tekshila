# Tekshila Environment Configuration - 2026 Ready
# Copy this file to .env and fill in your values

# =============================================================================
# Application
# =============================================================================
APP_NAME=Tekshila
APP_ENV=development  # development, staging, production
DEBUG=true
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR

# =============================================================================
# Security (Generate strong random keys in production)
# =============================================================================
SECRET_KEY=your-super-secret-key-change-in-production-min-32-chars
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# =============================================================================
# Database (PostgreSQL 15+)
# =============================================================================
DATABASE_URL=postgresql+asyncpg://tekshila:tekshila_password@localhost:5432/tekshila
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=30

# Redis (for caching and task queue)
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=

# =============================================================================
# GitHub OAuth
# =============================================================================
GITHUB_CLIENT_ID=your_github_oauth_app_client_id
GITHUB_CLIENT_SECRET=your_github_oauth_app_client_secret
GITHUB_CALLBACK_URL=http://localhost:3000/auth/github/callback

# =============================================================================
# AI / LLM (Google Gemini)
# =============================================================================
GEMINI_API_KEY=your_gemini_api_key_here
GEMINI_MODEL=gemini-1.5-pro
GEMINI_TEMPERATURE=0.2
GEMINI_MAX_TOKENS=8192

# LangSmith (optional - for agent observability)
LANGCHAIN_API_KEY=
LANGCHAIN_PROJECT=tekshila
LANGCHAIN_TRACING_V2=true

# =============================================================================
# Vector Store (ChromaDB)
# =============================================================================
CHROMA_PERSIST_DIRECTORY=./chroma_db
EMBEDDING_MODEL=all-MiniLM-L6-v2

# =============================================================================
# File Storage (S3/MinIO compatible)
# =============================================================================
STORAGE_TYPE=local  # local, s3, minio
STORAGE_BUCKET=tekshila-uploads
STORAGE_ENDPOINT=
STORAGE_ACCESS_KEY=
STORAGE_SECRET_KEY=
STORAGE_REGION=us-east-1

# Local storage path (if STORAGE_TYPE=local)
LOCAL_STORAGE_PATH=./uploads

# =============================================================================
# Celery / Background Tasks
# =============================================================================
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2
CELERY_WORKER_CONCURRENCY=4

# =============================================================================
# API Configuration
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# =============================================================================
# Frontend (Next.js)
# =============================================================================
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_APP_URL=http://localhost:3000

# =============================================================================
# Observability (OpenTelemetry)
# =============================================================================
OTEL_EXPORTER_OTLP_ENDPOINT=
OTEL_SERVICE_NAME=tekshila-api
OTEL_ENABLED=false

# =============================================================================
# Feature Flags
# =============================================================================
ENABLE_GITHUB_INTEGRATION=true
ENABLE_STREAMING_RESPONSES=true
ENABLE_VECTOR_SEARCH=true
ENABLE_AGENT_DEBUG=false
ENABLE_USAGE_TRACKING=true

# =============================================================================
# Limits
# =============================================================================
MAX_FILE_SIZE_MB=10
MAX_FILES_PER_UPLOAD=50
MAX_DOC_GENERATIONS_PER_HOUR=20
MAX_TOKEN_LIMIT_PER_REQUEST=8000

# Server Configuration
STREAMLIT_PORT=8501
VITE_PORT=3000
API_PORT=8000